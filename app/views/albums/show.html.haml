= render partial: 'layouts/header'

.wrapper
  .album-show
    .upper
      = render partial: 'album_info', locals: {album: @album, tracks: @tracks}
      
      .border-radius.pjax-wrapper
        #pjax-container
          .reviews
            .reviews__header
              Reviews
            - @album.reviews.reverse.each do |review|
              .review
                .review__user-name
                  = review.user.nickname
                %ul.review__tags
                  - review.tags.each do |tag|
                    %li.review__tags__tag
                      = tag.name
                = link_to review_path(review), class: 'review__link js-pjax' do
                  .review__content
                    .review__content__text
                      = simple_format(review.content)

                %ul.review__bottom
                  %li.comment-icon.js-modal-open{data: {target: "modal--#{review.id}"}}
                    = fa_icon 'comment-o', class: 'comment-icon__icon'
                    %span.comment-icon__count
                      = review.comments.count
                  %li.like{id: "like--#{review.id}"}
                    = render partial: 'likes/like', locals: {review: review}
                
                = render partial: 'modals/comment', locals: {review: review}

    .bottom  
      .another-albums
        .another-albums__header
          = @album.artist.name
          %span
            の他のアルバム
        .another-albums__container
          - if @album.another_albums().present?
            - @album.another_albums().each do |another_album|
              .another-albums__container__album
                = link_to album_path(another_album) do
                  .album-image
                  - if another_album.image.present?
                    = image_tag another_album.image, class: 'album-image__content'
                  - else
                    = image_tag 'no_image.png', class: 'album-image__content'
                  .album-info
                    .album-info__album-title
                      = another_album.title
  
  .post
    = button_tag '', class: "post__button", id: 'js-modal-review' do
      = fa_icon "edit", class: 'post__button__edit'
      %p.post__button__message
        Post
  
  = render partial: 'modals/review', locals: {album: @album}
